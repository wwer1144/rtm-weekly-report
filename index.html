<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>RTM ì£¼ê°„ í•™ìŠµ ë³´ê³ ì„œ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root {
      --bg: #f5f7ff;
      --card-bg: #ffffff;
      --text-main: #0f172a;
      --text-sub: #4b5563;
      --border: #d4d4dd;

      --sky: #e0f2ff;
      --sky-border: #bfdbfe;
      --primary: #0ea5e9;
      --secondary: #6366f1;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { height: 100%; }
    html { scroll-behavior: smooth; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Noto Sans KR", sans-serif;
      background:
        radial-gradient(circle at top, rgba(59,130,246,0.18), transparent 60%),
        var(--bg);
      color: var(--text-main);
      line-height: 1.6;
      overflow-x: hidden;
    }

    a { text-decoration: none; color: inherit; }

    .page {
      max-width: 1024px;
      margin: 0 auto;
      padding: 26px 18px 60px;
      position: relative;
    }

    .topbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 18px;
    }

    .logo {
      font-size: 18px;
      font-weight: 800;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--primary);
    }

    .top-tagline {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      color: var(--text-sub);
    }

    header {
      text-align: center;
      margin-bottom: 30px;
      position: relative;
    }

    .badge {
      display: inline-block;
      font-size: 11px;
      padding: 6px 18px;
      border-radius: 999px;
      background: linear-gradient(90deg, rgba(14,165,233,0.1), rgba(99,102,241,0.12));
      color: var(--primary);
      margin-bottom: 10px;
      font-weight: 600;
      letter-spacing: 0.12em;
      border: 1px solid rgba(148,163,184,0.8);
    }

    h1 {
      font-size: 26px;
      margin-bottom: 6px;
      font-weight: 900;
      letter-spacing: -0.02em;
      color: #020617;
    }

    .slogan-main {
      font-size: 14px;
      margin-bottom: 10px;
      text-transform: uppercase;
      letter-spacing: 0.26em;
      color: var(--secondary);
    }

    header p {
      font-size: 14px;
      color: var(--text-sub);
    }

    .highlight {
      color: var(--primary);
      font-weight: 700;
    }

    .meta-line {
      margin-top: 10px;
      font-size: 13px;
      color: var(--text-sub);
    }

    .meta-line span {
      font-weight: 600;
      color: #111827;
    }

    .speedline-header {
      width: 100%;
      height: 2px;
      margin: 18px auto 0;
      position: relative;
      overflow: hidden;
      background: linear-gradient(90deg, transparent, #d1d5db, transparent);
    }

    .speedline-header::before {
      content: "";
      position: absolute;
      left: -30%;
      top: 0;
      width: 60%;
      height: 100%;
      background: linear-gradient(90deg, transparent, var(--primary), var(--secondary), transparent);
      animation: run-line 2.4s linear infinite;
      opacity: 0.6;
    }

    .section {
      background: var(--card-bg);
      border-radius: 16px;
      padding: 20px 20px 18px;
      margin-bottom: 20px;
      border: 1px solid var(--border);
      box-shadow: 0 10px 24px rgba(15,23,42,0.06);
    }

    .section h2 {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 18px;
      margin-bottom: 8px;
      color: #020617;
    }

    .section h2 .icon {
      font-size: 20px;
    }

    .section p,
    .section li {
      font-size: 14px;
      color: var(--text-sub);
    }

    .list {
      margin-top: 8px;
      padding-left: 18px;
    }

    .list li + li { margin-top: 4px; }

    .em {
      color: var(--primary);
      font-weight: 600;
    }

    .sample-page {
      max-width: 720px;
      margin: 0 auto;
      background: var(--sky);
      padding: 18px 16px 20px;
      border-radius: 14px;
      border: 1px solid var(--sky-border);
      box-shadow: 0 10px 22px rgba(15,23,42,0.08);
      color: #111827;
    }

    .sample-page h3 {
      font-size: 20px;
      margin-bottom: 4px;
      color: #111827;
    }

    .sample-meta {
      font-size: 13px;
      color: #4b5563;
      margin-bottom: 14px;
    }

    .sample-page h4 {
      font-size: 15px;
      margin-top: 12px;
      margin-bottom: 6px;
      color: #0f766e;
    }

    .sample-page p {
      font-size: 14px;
      color: #111827;
    }

    .sample-divider {
      margin: 12px 0;
      border-top: 1px dashed #9ca3af;
    }

    .faq-item + .faq-item {
      margin-top: 10px;
      padding-top: 8px;
      border-top: 1px dashed var(--border);
    }

    .faq-q {
      color: #020617;
      font-weight: 700;
      margin-bottom: 4px;
      font-size: 14px;
    }

    .faq-a {
      color: var(--text-sub);
      font-size: 13px;
    }

    .contact-block {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-top: 10px;
    }

    .contact-item {
      background: var(--sky);
      border-radius: 10px;
      padding: 9px 10px;
      border: 1px solid var(--sky-border);
      box-shadow: 0 8px 18px rgba(15,23,42,0.06);
    }

    .contact-label {
      font-size: 11px;
      color: var(--text-sub);
      margin-bottom: 2px;
    }

    .contact-value {
      font-size: 13px;
      font-weight: 700;
      color: #111827;
    }

    .btn-row {
      margin-top: 14px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    .btn {
      padding: 9px 16px;
      border-radius: 999px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      border: none;
      transition: background 0.15s ease-out, box-shadow 0.15s ease-out, transform 0.15s ease-out;
    }

    .btn span.icon { font-size: 15px; }

    .btn-primary,
    .btn-ghost {
      background: var(--sky);
      color: #111827;
      border: 1px solid var(--sky-border);
      box-shadow: 0 6px 14px rgba(15,23,42,0.08);
    }

    .btn:hover {
      background: #bae6fd;
      transform: translateY(-1px);
      box-shadow: 0 8px 18px rgba(15,23,42,0.12);
    }

    footer {
      margin-top: 22px;
      text-align: center;
      font-size: 11px;
      color: #6b7280;
    }

    .status {
      margin-top: 10px;
      font-size: 13px;
      color: #b91c1c;
      text-align: center;
    }

    .select-box {
      max-width: 520px;
      margin: 0 auto 24px;
      background: #ffffff;
      border-radius: 16px;
      padding: 18px 18px 20px;
      border: 1px solid var(--border);
      box-shadow: 0 10px 24px rgba(15,23,42,0.06);
    }

    .field {
      margin-bottom: 12px;
      text-align: left;
    }

    .field label {
      display: block;
      font-size: 13px;
      margin-bottom: 4px;
      color: #111827;
      font-weight: 600;
    }

    .field input,
    .field select {
      width: 100%;
      padding: 7px 9px;
      border-radius: 8px;
      border: 1px solid #cbd5e1;
      font-size: 14px;
    }

    .field small {
      font-size: 11px;
      color: #6b7280;
    }

    .tag-pill {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 999px;
      background: var(--sky);
      border: 1px solid var(--sky-border);
      font-size: 11px;
      color: #0f172a;
      margin-top: 6px;
    }

    .hidden { display: none; }

    @keyframes run-line {
      0%   { transform: translateX(0); }
      100% { transform: translateX(180%); }
    }

    @media (max-width: 768px) {
      .page {
        padding: 20px 14px 40px;
      }
      .topbar {
        flex-direction: column;
        align-items: flex-start;
        gap: 4px;
      }
      h1 { font-size: 22px; }
      .slogan-main {
        font-size: 12px;
        letter-spacing: 0.2em;
      }
      .contact-block {
        grid-template-columns: 1fr;
      }
      .section {
        padding: 18px 16px 18px;
      }
    }
  </style>
</head>

<body>
  <div class="page">
    <div class="topbar">
      <div class="logo">RTM MATH LAB</div>
      <div class="top-tagline">CONCEPT Â· ACCURACY Â· APPLICATION</div>
    </div>

    <header>
      <div class="badge">WEEKLY PERFORMANCE REPORT</div>
      <h1>ì£¼ê°„ í•™ìŠµ ë³´ê³ ì„œ</h1>
      <div class="slogan-main">RACE TO MIRACLE</div>
      <p>
        í•œ ì£¼ ë™ì•ˆì˜ ìˆ˜ì—… ë‚´ìš©ì„ <span class="highlight">ì •í™•í•˜ê³  ê°„ë‹¨í•˜ê²Œ</span> ì •ë¦¬í•œ ë¦¬í¬íŠ¸ì…ë‹ˆë‹¤.
      </p>
      <div class="meta-line" id="meta-line">
        <!-- í•™ìƒ ì„ íƒ ì „ì—ëŠ” ì•ˆë‚´ ë¬¸êµ¬ -->
      </div>
      <div class="speedline-header"></div>
    </header>

    <div id="status" class="status"></div>

    <!-- ###### í•™ìƒ ì„ íƒ í™”ë©´ ###### -->
    <div id="selector-view">
      <div class="section">
        <h2><span class="icon">ğŸ”</span>ì ‘ì† ì¸ì¦</h2>
        <div class="select-box">
          <div class="field">
            <label for="pin-input">ê³µìœ  ë¹„ë°€ë²ˆí˜¸ (4ìë¦¬)</label>
            <input id="pin-input" type="password" maxlength="10" placeholder="ì˜ˆ: 2857" />
            <small>â€» ê°•ë ¥í•œ ë³´ì•ˆìš©ì´ ì•„ë‹ˆë¼, ì™¸ë¶€ ë…¸ì¶œì„ ë§‰ê¸° ìœ„í•œ ê°„ë‹¨í•œ ì ê¸ˆì…ë‹ˆë‹¤.</small>
          </div>
          <button class="btn btn-primary" id="pin-btn"><span class="icon">âœ…</span>í™•ì¸</button>
          <div id="pin-msg" class="status" style="margin-top:8px;"></div>
        </div>
      </div>

      <div class="section hidden" id="student-select-section">
        <h2><span class="icon">ğŸ‘¨â€ğŸ“</span>í•™ìƒ ì„ íƒ</h2>
        <div class="select-box">
          <p style="font-size:14px; color:#4b5563; margin-bottom:10px;">
            ì•„ë˜ì—ì„œ í•™ìƒì„ ì„ íƒí•˜ì‹œë©´ í•´ë‹¹ í•™ìƒì˜ ì£¼ê°„ í•™ìŠµ ë³´ê³ ì„œë¡œ ì´ë™í•©ë‹ˆë‹¤.
          </p>
          <div class="field">
            <label for="student-select">í•™ìƒ ì´ë¦„</label>
            <select id="student-select">
              <option value="">í•™ìƒì„ ì„ íƒí•´ ì£¼ì„¸ìš”</option>
            </select>
          </div>
          <button class="btn btn-primary" id="go-report-btn">
            <span class="icon">ğŸ“„</span>ë³´ê³ ì„œ ì—´ê¸°
          </button>
          <div class="tag-pill">URL ì§ì ‘ ì ‘ì†: ?student=í•™ìƒì½”ë“œ</div>
        </div>
      </div>
    </div>

    <!-- ###### ì‹¤ì œ ë¦¬í¬íŠ¸ í™”ë©´ ###### -->
    <div id="report-view" class="hidden">
      <!-- 1. ì¶œê²° -->
      <section class="section">
        <h2><span class="icon">ğŸ•’</span>1. ì¶œê²° í˜„í™©</h2>
        <p id="attendance"></p>
      </section>

      <!-- 2. ì§„ë„ -->
      <section class="section">
        <h2><span class="icon">ğŸ“š</span>2. ë‹¨ì›ë³„ ì§„ë„</h2>
        <p id="progress"></p>
      </section>

      <!-- 3. ìˆ™ì œ -->
      <section class="section">
        <h2><span class="icon">âœï¸</span>3. ìˆ™ì œ ìˆ˜í–‰ë¥ </h2>
        <p id="homework"></p>
      </section>

      <!-- 4. í…ŒìŠ¤íŠ¸ -->
      <section class="section">
        <h2><span class="icon">ğŸ“Š</span>4. í…ŒìŠ¤íŠ¸ ê²°ê³¼</h2>
        <p id="test"></p>
      </section>

      <!-- 5. ì½”ë©˜íŠ¸ -->
      <section class="section">
        <h2><span class="icon">ğŸ§‘â€ğŸ«</span>5. ë‹´ì„ ì¢…í•© ì½”ë©˜íŠ¸</h2>
        <div class="sample-page">
          <h3 id="comment-title">ë‹´ì„ ì¢…í•© ì½”ë©˜íŠ¸</h3>
          <div class="sample-meta" id="comment-meta"></div>

          <h4>â‘  ì˜í•œ ì </h4>
          <p id="comment-good"></p>

          <div class="sample-divider"></div>

          <h4>â‘¡ ë³´ì™„ì´ í•„ìš”í•œ ë¶€ë¶„</h4>
          <p id="comment-bad"></p>

          <div class="sample-divider"></div>

          <h4>â‘¢ ë‹¤ìŒ ì£¼ ì§€ë„ ê³„íš</h4>
          <p id="comment-plan"></p>
        </div>
      </section>

      <!-- FAQ & ì—°ë½ì²˜ ê·¸ëŒ€ë¡œ -->
      <section class="section">
        <h2><span class="icon">â“</span>ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ (FAQ)</h2>
        <div class="faq-item">
          <div class="faq-q">Q. ë³´ê³ ì„œë¥¼ ëª» ë°›ì•˜ìŠµë‹ˆë‹¤.</div>
          <div class="faq-a">
            A. ë¨¼ì € ì¹´ì¹´ì˜¤í†¡/ë¬¸ì ìŠ¤íŒ¸í•¨ê³¼ ì±„ë„ ì¹œêµ¬ ì¶”ê°€ ì—¬ë¶€ë¥¼ í™•ì¸í•´ ì£¼ì„¸ìš”.  
            ê·¸ë˜ë„ í™•ì¸ì´ ì•ˆ ë˜ë©´ ì„ ìƒë‹˜ê»˜ ì—°ë½ ì£¼ì‹œë©´ ì¦‰ì‹œ ì¬ë°œì†¡í•´ ë“œë¦½ë‹ˆë‹¤.
          </div>
        </div>
        <div class="faq-item">
          <div class="faq-q">Q. ë³´í˜¸ì ì—°ë½ì²˜ë¥¼ ë³€ê²½í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤.</div>
          <div class="faq-a">
            A. <span class="em">í•™ìƒ ì´ë¦„ + ìƒˆ ì—°ë½ì²˜</span>ë¥¼ ì¹´ì¹´ì˜¤í†¡/ë¬¸ìë¡œ ë³´ë‚´ì£¼ì‹œë©´  
            ë‹¤ìŒ ì£¼ ë³´ê³ ì„œë¶€í„° ìƒˆ ë²ˆí˜¸ë¡œ ë°œì†¡ë˜ë„ë¡ ë³€ê²½í•´ ë“œë¦½ë‹ˆë‹¤.
          </div>
        </div>
      </section>

      <section class="section">
        <h2><span class="icon">ğŸ“</span>ë¬¸ì˜ ë° ì—°ë½ì²˜</h2>
        <p>ì£¼ê°„ í•™ìŠµ ë³´ê³ ì„œì™€ ê´€ë ¨í•˜ì—¬ ê¶ê¸ˆí•˜ì‹  ì ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“ ì§€ ì—°ë½ ì£¼ì„¸ìš”.</p>

        <div class="contact-block">
          <div class="contact-item">
            <div class="contact-label">ë‹´ë‹¹ ì„ ìƒë‹˜</div>
            <div class="contact-value">ë°•ì›ìš± ì„ ìƒë‹˜ (ìˆ˜í•™)</div>
          </div>
          <div class="contact-item">
            <div class="contact-label">ì—°ë½ì²˜</div>
            <div class="contact-value">010-2319-7526</div>
          </div>
          <div class="contact-item">
            <div class="contact-label">ì¹´ì¹´ì˜¤í†¡ ì±„ë„</div>
            <div class="contact-value">@RaceToMiracleMath</div>
          </div>
          <div class="contact-item">
            <div class="contact-label">ìƒë‹´ ê°€ëŠ¥ ì‹œê°„</div>
            <div class="contact-value">ë§¤ì¼ 13:00 ~ ìµì¼ 04:00 </div>
          </div>
        </div>

        <div class="btn-row">
          <a href="https://open.kakao.com/o/gxBvHX1h" class="btn btn-primary" target="_blank">
            <span class="icon">ğŸ’¬</span>ì¹´ì¹´ì˜¤í†¡ìœ¼ë¡œ ë¬¸ì˜í•˜ê¸°
          </a>
          <a href="./" class="btn btn-ghost">
            <span class="icon">ğŸ”</span>ë‹¤ë¥¸ í•™ìƒ ì„ íƒí•˜ê¸°
          </a>
        </div>
      </section>
    </div>

    <footer>
      RTM ì£¼ê°„ ë³´ê³ ì„œ Â· í•™ìƒë³„ ë°ì´í„°ëŠ” ì£¼ë§ˆë‹¤ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤.
    </footer>
  </div>

  <script>
    // âš  ì§„ì§œ ë³´ì•ˆìš© ë¹„ë°€ë²ˆí˜¸ê°€ ì•„ë‹ˆë¼ "ì™¸ë¶€ì—ì„œ ë§‰ ëˆŒëŸ¬ë³´ëŠ” ì‚¬ëŒ í•„í„°"ìš©ì´ì•¼.
    const ACCESS_PIN = "4925"; // ì›í•˜ëŠ” 4ìë¦¬ë¡œ ë°”ê¿”

    const selectorView = document.getElementById('selector-view');
    const reportView   = document.getElementById('report-view');
    const statusEl     = document.getElementById('status');
    const metaLine     = document.getElementById('meta-line');

    const pinInput = document.getElementById('pin-input');
    const pinBtn   = document.getElementById('pin-btn');
    const pinMsg   = document.getElementById('pin-msg');
    const studentSelectSection = document.getElementById('student-select-section');
    const studentSelect = document.getElementById('student-select');
    const goReportBtn   = document.getElementById('go-report-btn');

    function showSelector() {
      selectorView.classList.remove('hidden');
      reportView.classList.add('hidden');
      metaLine.textContent = 'í•™ìƒì„ ì„ íƒí•˜ì‹œë©´ í•´ë‹¹ í•™ìƒì˜ ì£¼ê°„ í•™ìŠµ ë³´ê³ ì„œë¥¼ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.';
    }

    function showReport() {
      selectorView.classList.add('hidden');
      reportView.classList.remove('hidden');
    }

    function getStudentIdFromUrl() {
      const params = new URLSearchParams(window.location.search);
      return params.get('student');
    }

    async function loadStudentList() {
      try {
        const res = await fetch('data/students.json');
        if (!res.ok) return;
        const list = await res.json();
        studentSelect.innerHTML = '<option value="">í•™ìƒì„ ì„ íƒí•´ ì£¼ì„¸ìš”</option>';
        list.forEach(s => {
          const opt = document.createElement('option');
          opt.value = s.id;
          opt.textContent = `${s.grade} ${s.name}`;
          studentSelect.appendChild(opt);
        });
      } catch (e) {
        console.error(e);
      }
    }

async function loadReport(studentId) {
  statusEl.textContent = 'ë¡œë”© ì¤‘ì…ë‹ˆë‹¤...';

  try {
    const res = await fetch(`data/${studentId}.json`);
    if (!res.ok) {
      statusEl.textContent = `í•´ë‹¹ í•™ìƒ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. (data/${studentId}.json)`;
      showSelector();
      return;
    }

    const data = await res.json();
    statusEl.textContent = '';

    // ì•ˆì „í•˜ê²Œ ê¸°ë³¸ê°’ ì²˜ë¦¬ (undefined â†’ ë¹ˆ ë¬¸ìì—´)
    const safe = (v) => (v === undefined || v === null ? '' : v);

    metaLine.textContent =
      `${safe(data.week)} Â· ${safe(data.grade)} ${safe(data.studentName)} í•™ìƒ Â· ê³¼ëª©: ${safe(data.subject)}`;

    const att = data.attendance || {};
    document.getElementById('attendance').innerHTML =
      `Â· ì´ë²ˆ ì£¼ ìˆ˜ì—…ì¼: ${safe(att.totalClasses)}<br/>
       Â· ê²°ì„ ${safe(att.absent)}íšŒ / ì§€ê° ${safe(att.late)}íšŒ / ì¡°í‡´ ${safe(att.earlyLeave)}íšŒ<br/>
       Â· ìˆ˜ì—… íƒœë„: ${safe(att.attitude)}`;

    const prog = data.progress || {};
    document.getElementById('progress').innerHTML =
      `Â· í•™ìŠµ ë‹¨ì›: ${safe(prog.unit)}<br/>
       Â· ìƒì„¸ ì§„ë„: ${safe(prog.detail)}<br/>
       Â· ì´í•´ë„: ${safe(prog.understanding)}`;

    const hw = data.homework || {};
    document.getElementById('homework').innerHTML =
      `Â· ìˆ™ì œ ë¶„ëŸ‰: ${safe(hw.amount)}<br/>
       Â· ì œì¶œ ì—¬ë¶€: ${safe(hw.submission)}<br/>
       Â· ìˆ˜í–‰ë¥ : ${safe(hw.completion)}<br/>
       Â· ì •ë‹µë¥ : ${safe(hw.correct)}<br/>
       Â· ì½”ë©˜íŠ¸: ${safe(hw.comment)}`;

    const test = data.test || {};
    document.getElementById('test').innerHTML =
      `Â· í…ŒìŠ¤íŠ¸ ì¢…ë¥˜: ${safe(test.type)}<br/>
       Â· ì‹œí—˜ ì¼ì: ${safe(test.date)}<br/>
       Â· ì ìˆ˜: ${safe(test.score)}ì  / ${safe(test.total)}ì  (ë°˜ í‰ê·  ${safe(test.classAverage)}ì )<br/>
       Â· ìƒëŒ€ ìœ„ì¹˜: ${safe(test.rank)}<br/>
       Â· í•´ì„: ${safe(test.analysis)}`;

    const com = data.comment || {};
    document.getElementById('comment-title').textContent =
      `ë‹´ì„ ì¢…í•© ì½”ë©˜íŠ¸ - ${safe(data.studentName)} í•™ìƒ`;
    document.getElementById('comment-meta').textContent = safe(com.summary);
    document.getElementById('comment-good').textContent = safe(com.good);
    document.getElementById('comment-bad').textContent = safe(com.need);
    document.getElementById('comment-plan').textContent = safe(com.plan);

    showReport();
  } catch (e) {
    console.error(e);
    statusEl.textContent = 'ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.';
  }
}

    // PIN í™•ì¸
    pinBtn.addEventListener('click', () => {
      const v = pinInput.value.trim();
      if (v === ACCESS_PIN) {
        pinMsg.textContent = '';
        localStorage.setItem('rtmWeeklyAuthorized', '1');
        studentSelectSection.classList.remove('hidden');
        loadStudentList();
      } else {
        pinMsg.textContent = 'ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.';
      }
    });

    // í•™ìƒ ì„ íƒ í›„ ì´ë™
    goReportBtn.addEventListener('click', () => {
      const id = studentSelect.value;
      if (!id) return;
      window.location.href = `./?student=${encodeURIComponent(id)}`;
    });

    // ì´ˆê¸° ì§„ì… ë¡œì§
    (function init() {
      const studentId = getStudentIdFromUrl();
      const authorized = localStorage.getItem('rtmWeeklyAuthorized') === '1';

      if (studentId) {
        // ì§ì ‘ URLë¡œ ë“¤ì–´ì˜¨ ê²½ìš° â†’ ë°”ë¡œ ë°ì´í„° ë¡œë”©
        loadReport(studentId);
      } else {
        showSelector();
        if (authorized) {
          studentSelectSection.classList.remove('hidden');
          loadStudentList();
        }
      }
    })();
  </script>
</body>
</html>


